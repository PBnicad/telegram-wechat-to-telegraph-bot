# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
telegram-wechat-to-telegraph-bot/
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ deploy.yml                    # GitHub Actions è‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ setup-secrets.js             # äº¤äº’å¼è®¾ç½®è„šæœ¬
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ wechat-config.js          # å¾®ä¿¡è§£æé…ç½®
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ callback.js               # å›è°ƒæŸ¥è¯¢å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ inline.js                 # Inline æŸ¥è¯¢å¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ message.js                # æ¶ˆæ¯å¤„ç†å™¨ï¼ˆåŒ…å«AIæ€»ç»“ï¼‰
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ deepseek.js               # DeepSeek API æœåŠ¡ï¼ˆAIæ€»ç»“ï¼‰
â”‚   â”‚   â”œâ”€â”€ telegram.js               # Telegram API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ telegraph.js              # Telegraph API æœåŠ¡
â”‚   â”‚   â””â”€â”€ wechat-parser.js          # å¾®ä¿¡æ–‡ç« è§£æå™¨
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ wechat.js                 # å¾®ä¿¡ç›¸å…³ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ constants.js              # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ helpers.js                # è¾…åŠ©å‡½æ•°
â”‚   â”‚   â””â”€â”€ wechat-utils.js           # å¾®ä¿¡å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.js                      # Cloudflare Workers å…¥å£æ–‡ä»¶
â”œâ”€â”€ .wrangler/                        # Wrangler ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ node_modules/                     # ä¾èµ–åŒ…
â”œâ”€â”€ DEPLOYMENT.md                     # è¯¦ç»†éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ LICENSE                           # MIT è®¸å¯è¯
â”œâ”€â”€ README.md                         # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ package.json                      # é¡¹ç›®é…ç½®
â””â”€â”€ wrangler.toml                     # Cloudflare Workers é…ç½®
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. æ¶ˆæ¯å¤„ç†æµç¨‹ (`src/handlers/message.js`)
- **å¾®ä¿¡æ–‡ç« è§£æ**: è°ƒç”¨ WeChatParser è§£ææ–‡ç« å†…å®¹
- **Telegraph é¡µé¢åˆ›å»º**: ç”Ÿæˆç¾è§‚çš„ Telegraph é¡µé¢
- **AI æ€»ç»“ç”Ÿæˆ**: è°ƒç”¨ DeepSeek API ç”Ÿæˆæ™ºèƒ½æ€»ç»“
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### 2. Inline æ¨¡å¼ (`src/handlers/inline.js`)
- **å¿«é€Ÿè½¬æ¢**: æ”¯æŒåœ¨ä»»ä½•èŠå¤©ä¸­å¿«é€Ÿè½¬æ¢
- **ç®€æ´å“åº”**: åªè¿”å›åŸæ–‡å’Œé¢„è§ˆé“¾æ¥
- **æ€§èƒ½ä¼˜åŒ–**: ä¸åŒ…å« AI æ€»ç»“ï¼Œå“åº”æ›´å¿«

### 3. AI æ€»ç»“æœåŠ¡ (`src/services/deepseek.js`)
- **DeepSeek API é›†æˆ**: è°ƒç”¨ DeepSeek Chat API
- **æ™ºèƒ½æ€»ç»“**: ç”Ÿæˆç®€æ´å‡†ç¡®çš„æ–‡ç« æ€»ç»“
- **é”™è¯¯å®¹é”™**: AI æ€»ç»“å¤±è´¥ä¸å½±å“ä¸»è¦åŠŸèƒ½

### 4. å¾®ä¿¡è§£æå™¨ (`src/services/wechat-parser.js`)
- **æ–‡ç« å†…å®¹æå–**: æå–æ ‡é¢˜ã€ä½œè€…ã€æ­£æ–‡ç­‰å†…å®¹
- **æ ¼å¼è½¬æ¢**: å°† HTML å†…å®¹è½¬æ¢ä¸º Markdown
- **å›¾ç‰‡å¤„ç†**: å¤„ç†å’Œä¼˜åŒ–å›¾ç‰‡é“¾æ¥

## ğŸ”§ éƒ¨ç½²æ–¹å¼

### GitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰
- **å·¥ä½œæµæ–‡ä»¶**: `.github/workflows/deploy.yml`
- **è‡ªåŠ¨è®¾ç½®**: è‡ªåŠ¨é…ç½® Cloudflare Workers secrets
- **CI/CD**: æ¨é€ä»£ç è‡ªåŠ¨è§¦å‘éƒ¨ç½²

### æ‰‹åŠ¨éƒ¨ç½²
- **è®¾ç½®è„šæœ¬**: `scripts/setup-secrets.js`
- **äº¤äº’å¼é…ç½®**: å¼•å¯¼ç”¨æˆ·è®¾ç½®å¿…è¦çš„ secrets
- **ä¸€é”®éƒ¨ç½²**: `npm run setup && npm run deploy`

## ğŸ“± åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”

| åŠŸèƒ½ | ç›´æ¥å‘é€é“¾æ¥ | Inline æ¨¡å¼ |
|------|-------------|-------------|
| åŸæ–‡é“¾æ¥ | âœ… | âœ… |
| Telegraph é¢„è§ˆ | âœ… | âœ… |
| AI æ™ºèƒ½æ€»ç»“ | âœ… | âŒ |
| å“åº”é€Ÿåº¦ | è¾ƒæ…¢ | å¿«é€Ÿ |
| ä½¿ç”¨åœºæ™¯ | æ·±åº¦é˜…è¯» | å¿«é€Ÿåˆ†äº« |

## ğŸ” ç¯å¢ƒé…ç½®

### å¿…éœ€çš„ Secrets
- `TELEGRAM_BOT_TOKEN`: Telegram Bot Token
- `DEEPSEEK_API_KEY`: DeepSeek API å¯†é’¥ï¼ˆå·²é¢„è®¾ï¼‰

### å¯é€‰çš„ Secrets
- `TELEGRAPH_ACCESS_TOKEN`: Telegraph Tokenï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰

## ğŸ› ï¸ å¼€å‘å·¥å…·

### NPM è„šæœ¬
- `npm run dev`: æœ¬åœ°å¼€å‘
- `npm run deploy`: éƒ¨ç½²åˆ° Cloudflare
- `npm run setup`: äº¤äº’å¼è®¾ç½®
- `npm run logs`: æŸ¥çœ‹å®æ—¶æ—¥å¿—
- `npm run validate`: éªŒè¯ä»£ç è¯­æ³•

### è°ƒè¯•åŠŸèƒ½
- **è¯¦ç»†æ—¥å¿—**: å®Œæ•´çš„å¤„ç†æµç¨‹æ—¥å¿—
- **é”™è¯¯è¿½è¸ª**: è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå †æ ˆ
- **æ€§èƒ½ç›‘æ§**: å¤„ç†æ—¶é—´å’ŒæˆåŠŸç‡ç»Ÿè®¡

---

**é¡¹ç›®æ¶æ„ç®€æ´é«˜æ•ˆï¼Œæ”¯æŒå¿«é€Ÿéƒ¨ç½²å’Œæ™ºèƒ½æ–‡ç« å¤„ç†ï¼** ğŸš€